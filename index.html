<!DOCTYPE html>
<html lang="ja">
<style>
    .error {
        color: red;
    }
</style>

<head>
    <meta charset="UTF-8">
    <title>大阪電通生向けかゆいところに手が届くサイト</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/push.js/0.0.11/push.min.js"></script>
    <script src="Main.js"></script>
    <script src="BUS_Time_KIntetsu.js"></script>
    <script src="BUS_Time_OECU.js"></script>
    <!-- <script src="json_load.js"></script> -->
</head>

<body>
    <h1>大阪電通生向けかゆいところに手が届くサイト</h1>
    <span>Made by 凛音(<a href="https://x.com/hs_oecu">Twitter</a>)</span><br>
    <div style="display: none;">
        <span>キャンパス:</span>
        <select name="campus" id="Campus" disabled>
            <option value="Neyahawa">寝屋川キャンパス</option>
            <option value="Sijounawate" selected>四條畷キャンパス</option>
        </select>
    </div>
    <h2>
        <div id="clock">現在時刻:時刻を取得できません。</div><br>
        <div id="textA">次の授業まで:</div>
    </h2>
    <div id="Kouji_Sijounawate">
        <span>校時表(四條畷キャンパス)</span>
        <table border="3">
            <tr>
                <th>次限</th>
                <th><input id="Shijonawate_1" type="checkbox" checked>1限</th>
                <th><input id="Shijonawate_2" type="checkbox" checked>2限</th>
                <th><input id="Shijonawate_3" type="checkbox" checked>3限</th>
                <th><input id="Shijonawate_4" type="checkbox" checked>4限</th>
                <th><input id="Shijonawate_5" type="checkbox" checked>5限</th>
            </tr>
            <tr>
                <th>始まり</th>
                <th>9:30</th>
                <th>11:25</th>
                <th>13:55</th>
                <th>15:50</th>
                <th>17:45</th>
            </tr>
            <tr>
                <th>終わり</th>
                <th>11:15</th>
                <th>13:10</th>
                <th>15:40</th>
                <th>17:35</th>
                <th>19:30</th>
            </tr>
        </table>
        <br>
        <span><a href="index.html?Campus=Neyagawa">寝屋川キャンパス→</a></span>
        <h1>バス出発時刻(四條畷電通大/四條畷キャンパス)</h1>
        <select id="Bus_Time_Shijonawate">
            <option value="Now" selected>現在時刻</option>
            <option value="E1">1限終了時</option>
            <option value="E2">2限終了時</option>
            <option value="E3">3限終了時</option>
            <option value="E4">4限終了時</option>
            <option value="E5">5限終了時</option>
        </select>
        <table border="3">
            <tr>
                <th>
                </th>
                <th colspan="3">
                    dep. 1st
                </th>
                <th colspan="3">
                    dep. 2nd
                </th>
            </tr>
            <tr>
                <th>
                    会社
                </th>
                <th>
                    出発時刻
                </th>
                <th>
                    行き先
                </th>
                <th>
                    出発までの時間
                </th>
                <th>
                    出発時刻
                </th>
                <th>
                    行き先
                </th>
                <th>
                    出発までの時間
                </th>
            </tr>
            <tr>
                <th>
                    近鉄バス(四条畷駅方面)
                </th>
                <th>
                    <span id="time_Kintetsu"></span>
                </th>
                <th><span id="To_Kintetsu"></span>
                </th>
                <th rowspan="2"><span>
                        <font color="#ff0000">準備中</font>
                    </span>
                </th>
                <th>
                    <span id="time_Kintetsu_2nd"></span>
                </th>
                <th><span id="To_Kintetsu_2nd"></span>
                </th>
                <th rowspan="2"><span>
                        <font color="#ff0000">準備中</font>
                    </span>
                </th>
            </tr>
            <tr>
                <th>
                    電通大スクールバス
                </th>
                <th>
                    <span id="time_OECU_Shijonawate"></span>
                </th>
                <th>
                    <span id="To_OECU_Shijonawate"></span>
                </th>
                <th>
                    <span id="time_OECU_Shijonawate_2nd"></span>
                </th>
                <th>
                    <span id="To_OECU_Shijonawate_2nd"></span>
                </th>
            </tr>
        </table>
        <font color="#ff0000">
            2025年4月17日時点のダイヤです。<br>四條畷キャンパス行きのバスは寝屋川キャンパスに記載しています。<br>臨時ダイヤ、学休期間ダイヤ(休校期間ダイヤ)、祝日ダイヤには対応していません。
        </font>
        <!-- <span>From:</span>
        <select name="Start_Sijonawate" id="Start_Sijonawate">
            <option value="2">1,2,3号館</option>
            <option value="4" disabled>4号館(非対応)</option>
            <option value="5" disabled>5号館(非対応)</option>
            <option value="6">6,7号館(コナミホール前)</option>
            <option value="8" disabled>8号館(非対応)</option>
            <option value="9">9号館(KOZUKI HALL前)</option>
            <option value="10">10号館</option>
            <option value="11" disabled>11号館(非対応)</option>
            <option value="12" disabled>12号館(非対応)</option>
        </select><br><span>To:</span>
        <select name="Arrival_Sijonawate" id="Arrival_Sijonawate">
            <option value="2">1,2,3号館</option>
            <option value="4" disabled>4号館(非対応)</option>
            <option value="5" disabled>5号館(非対応)</option>
            <option value="6">6,7号館(コナミホール前)</option>
            <option value="8" disabled>8号館(非対応)</option>
            <option value="9">9号館(KOZUKI HALL前)</option>
            <option value="10">10号館</option>
            <option value="11" disabled>11号館(非対応)</option>
            <option value="12" disabled>12号館(非対応)</option>
        </select>
        <div id="output_Sijonawate"></div> -->
    </div>
    <div id="Kouji_Neyagawa" style="display: none;">
        <span>校時表(寝屋川キャンパス)</span>
        <table border="3">
            <tr>
                <th>次限</th>
                <th><input id="Neyagawa_1" type="checkbox" checked>1限</th>
                <th><input id="Neyagawa_2" type="checkbox" checked>2限</th>
                <th><input id="Neyagawa_3" type="checkbox" checked>3限</th>
                <th><input id="Neyagawa_4" type="checkbox" checked>4限</th>
                <th><input id="Neyagawa_5" type="checkbox" checked>5限</th>
            </tr>
            <tr>
                <th>始まり</th>
                <th>9:00</th>
                <th>10:55</th>
                <th>13:25</th>
                <th>15:20</th>
                <th>17:15</th>
            </tr>
            <tr>
                <th>終わり</th>
                <th>10:45</th>
                <th>12:40</th>
                <th>15:10</th>
                <th>17:05</th>
                <th>19:00</th>
            </tr>
        </table>
        <br>
        <span><a href="index.html?Campus=Shijonawate">四條畷キャンパス→</a></span>
        <h1>バス出発時刻(寝屋川キャンパス)</h1>
        <select id="Bus_Time_Neyagawa">
            <option value="Now" selected>現在時刻</option>
            <option value="E1">1限終了時</option>
            <option value="E2">2限終了時</option>
            <option value="E3">3限終了時</option>
            <option value="E4">4限終了時</option>
            <option value="E5">5限終了時</option>
        </select>
        <table border="3">
            <tr>
                <th>
                </th>
                <th colspan="3">
                    dep. 1st
                </th>
                <th colspan="3">
                    dep. 2nd
                </th>
            </tr>
            <tr>
                <th>
                    会社
                </th>
                <th>
                    時刻
                </th>
                <th>
                    行き先
                </th>
                <th>
                    出発までの時間
                </th>
                <th>
                    時刻
                </th>
                <th>
                    行き先
                </th>
                <th>
                    出発までの時間
                </th>
            </tr>
            <tr>
                <th>
                    電通大スクールバス
                </th>
                <th>
                    <span id="time_OECU_Neyagawa"></span>
                </th>
                <th><span id="To_OECU_Neyagawa"></span>
                </th>
                <th><span>
                        <font color="#ff0000">準備中</font>
                    </span>
                </th>
                <th>
                    <span id="time_OECU_Neyagawa_2nd"></span>
                </th>
                <th><span id="To_OECU_Neyagawa_2nd"></span>
                </th>
                <th>
                    <span>
                        <font color="#ff0000">準備中</font>
                    </span>
                </th>
            </tr>
        </table>
        <font color="#ff0000">
            2025年4月17日時点のダイヤです。<br>寝屋川キャンパス行きのバスと四条畷駅方面行きのバス(近鉄バス)は四條畷キャンパスに記載しています。<br>臨時ダイヤ、学休期間ダイヤ、祝日ダイヤには対応していません。
        </font>
        <!-- <span>From:</span>
        <select name="Start_Neyagawa" id="Start_Neyagawa" disabled>
            <option value="A" disabled selected>A号館(非対応)</option>
        </select><br><span>To:</span>
        <select name="Arrival_Neyagawa" id="Arrival_Neyagawa" disabled>
            <option value="A" disabled selected>A号館(非対応)</option>
        </select>
        <div id="output_Neyagawa" class="error">この機能は、寝屋川キャンパスは非対応です。</div> -->
    </div>
    <span>※40fps以上が出ない端末であれば、25ミリ秒以上の遅延が発生します。</span>
    <p>Ver.1.7</p>
    <div>
        <h2>更新ログ</h2>
        <div style="width: 100%; height: 200px; overflow-y: scroll; border: 1px #999999 solid;">
            <div>Ver.1.7:バスの出発時刻を追加,遅延を最大25ミリ秒に変更</div>
            <div>Ver.1.6:カスタム機能を追加</div>
            <div>Ver.1.5:サイト名を改名 製作者の名前を明記 所要時間の表示を廃止</div>
            <div>Ver.1.4:所要時間の表示を実装(寝屋川キャンパスは非対応)</div>
            <div>Ver.1.3:時間のズレを修正</div>
            <div>Ver.1.2:寝屋川キャンパスに完全対応</div>
            <div>Ver.1.1:5限枠の制作、寝屋川キャンパスの校時表も制作(現在の表示は非対応)</div>
            <div>Ver.1.0:完成</div>
        </div>
    </div>
    <br>
    <font color="#ff0000">
        【勤勉な学生に向けた注意事項】このサイトを授業中に見ると怠惰になります。見過ぎにはご注意ください。
    </font>
    <div>
        不具合やご要望がありましたら、製作者までご連絡ください。
    </div>
    <script>
        //
        window.onload = function () {
            let Campus = document.getElementById('Campus');
            const params = new URLSearchParams(location.search);
            switch (params.get("Campus")) {
                case "Neyagawa":
                    Campus.selectedIndex = 0;
                    break;
                case "Shijonawate":
                    Campus.selectedIndex = 1;
                    break;
                default:
                    Campus.selectedIndex = 1;
                    break;
            }
            /*
            if (Campus.selectedIndex != null) {
                Campus.selectedIndex = sessionStorage.getItem('Campus');
            }
                */
            FixedonUpdate();
            setInterval(FixedonUpdate, 25);
            console.log(Campus.selectedIndex);
            setInterval(Save, 1);
            // OnStartA();
        };
        function Save() {
            sessionStorage.setItem('Campus', Campus.selectedIndex);
        }
        function FixedonUpdate() {
            updateClock();
            let Campus = document.getElementById('Campus');
            let Kouji_Sijounawate = document.getElementById('Kouji_Sijounawate');
            let Kouji_Neyagawa = document.getElementById('Kouji_Neyagawa');
            switch (Campus.value) {
                case "Sijounawate":
                    Kouji_Sijounawate.style.display = 'block';
                    Kouji_Neyagawa.style.display = 'none';
                    break;
                case "Neyahawa":
                    Kouji_Neyagawa.style.display = 'block';
                    Kouji_Sijounawate.style.display = 'none';
                    break;
            }

        }
        function updateClock() {
            var now = new Date();
            var hours = now.getHours();
            var minutes = now.getMinutes();
            var seconds = now.getSeconds();

            // ゼロパディングを行う
            hours = hours < 10 ? '0' + hours : hours;
            minutes = minutes < 10 ? '0' + minutes : minutes;
            seconds = seconds < 10 ? '0' + seconds : seconds;

            // 時刻を表示する
            var timeString = hours + ':' + minutes + ':' + seconds;
            document.getElementById('clock').innerText = "現在時刻:" + timeString;

            let Campus = document.getElementById('Campus').value;
            if (Campus == "Neyahawa") {
                // document.getElementById('textA').innerText = "修正中"; return;
                if (seconds != 0) {
                    textA_Neyahawa(hours, minutes, (60 - seconds));
                }
                else {
                    textA_Neyahawa(hours, (minutes - 1), (0));
                }
            }
            else {
                if (seconds != 0) {
                    textA_Sijounawate(hours, minutes, (60 - seconds));
                }
                else {
                    textA_Sijounawate(hours, (minutes - 1), (0));
                }
            }
        }
    </script>

</body>

</html>